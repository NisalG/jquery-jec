(function($){$.fn.editableCombobox=function(options){var defaults={position:0,classes:'',styles:{},pluginClass:'jecEditableOption',filters:{96:0,97:1,98:2,99:3,100:4,101:5,102:6,103:7,104:8,105:9,106:'*',107:'=',109:'-',110:'.',111:'/',186:';',187:'=',188:',',189:'-',190:'.',191:'/',192:'`',219:'[',220:'\\',221:']',222:'\''},altFilters:{},ctrlFilters:{},shiftFilters:{48:')',49:'!',50:'@',51:'#',52:'$',53:'%',54:'^',55:'&',56:'*',57:'(',109:'_',186:':',188:'<',190:'>',191:'?',192:'~',219:'{',220:'|',221:'}',222:'"'},altCtrlFilters:{},altShiftFilters:{},ctrlShiftFilters:{},altCtrlShiftFilters:{},ignoredKeys:[9,13,16,17,18,19,20,27,33,34,35,36,37,38,39,40,45,46,91,92,93,112,113,114,115,116,117,118,119,120,121,122,123,144,145]};var options=$.extend(defaults,options);if($.browser.msie){Array.prototype.indexOf=function(object){for(var i=0;i<this.length;i++){if(this[i]==object){return i;}}return-1;}}return $(this).filter('select').each(function(){if($(this).children(options.pluginClass).length==0){var editableOption=$(document.createElement('option'));editableOption.addClass(options.pluginClass).hide();if(typeof(options.classes)=='string'){editableOption.addClass(options.classes);}else if(typeof(options.classes)=='object'){for(var i=0;i<options.classes.length;i++){editableOption.addClass(options.classes[i]);}}if(typeof(options.styles)=='object'){for(var i=0;i<options.styles.length;i++){editableOption.append(options.styles[i]);}}if($(this).children().eq(options.position).length!=0){$(this).children().eq(options.position).before(editableOption);}else{$(this).append(editableOption);}}$(this).keyup(function(event){switch(event.keyCode){case 8:var option=$(this).children('option.'+options.pluginClass);if(option.val().length>1){$(this).children(':selected').removeAttr('selected');var value=option.val().substring(0,option.val().length-1);option.val(value).text(value).attr('selected','selected').show();}else if(option.val().length==1){option.val('').text('').hide();}break;default:if(options.ignoredKeys.indexOf(event.keyCode)==-1){$(this).children(':selected').removeAttr('selected');if(event.altKey&&event.ctrlKey&&event.shiftKey&&options.altCtrlShiftFilters[event.keyCode]!=null){keyValue=options.altCtrlShiftFilters[event.keyCode];}else if(event.altKey&&event.ctrlKey&&options.altCtrlFilters[event.keyCode]!=null){keyValue=options.altCtrlFilters[event.keyCode];}else if(event.altKey&&event.shiftKey&&options.altShiftFilters[event.keyCode]!=null){keyValue=options.altShiftFilters[event.keyCode];}else if(event.ctrlKey&&event.shiftKey&&options.ctrlShiftFilters[event.keyCode]!=null){keyValue=options.ctrlShiftFilters[event.keyCode];}else if(event.altKey&&options.altFilters[event.keyCode]!=null){keyValue=options.altFilters[event.keyCode];}else if(event.ctrlKey&&options.ctrlFilters[event.keyCode]!=null){keyValue=options.ctrlFilters[event.keyCode];}else if(event.shiftKey&&options.shiftFilters[event.keyCode]!=null){keyValue=options.shiftFilters[event.keyCode];}else if(options.filters[event.keyCode]!=null){keyValue=options.filters[event.keyCode];}else{var keyValue=String.fromCharCode(event.keyCode);if(event.shiftKey){keyValue=keyValue.toUpperCase();}else{keyValue=keyValue.toLowerCase();}}var option=$(this).children('option.'+options.pluginClass);var value=option.val()+keyValue;option.val(value).text(value).attr('selected','selected').show();}break;}});$(this).keydown(function(event){return(event.keyCode!=8);});});};})(jQuery);