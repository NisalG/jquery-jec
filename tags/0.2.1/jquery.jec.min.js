(function($){$.fn.editableCombobox=function(options){var defaults={'position':0,'classes':'','styles':{},'pluginClass':'jecEditableOption'};var options=$.extend(defaults,options);return $(this).filter('select').each(function(){if($(this).children(options.pluginClass).length==0){var editableOption=$(document.createElement('option'));editableOption.addClass(options.pluginClass).hide();if(typeof(options.classes)=='string'){editableOption.addClass(options.classes);}else if(typeof(options.classes)=='object'){for(var i=0;i<options.classes.length;i++){editableOption.addClass(options.classes[i]);}}if(typeof(options.styles)=='object'){for(var i=0;i<options.styles.length;i++){editableOption.append(options.styles[i]);}}if($(this).children().eq(options.position).length!=0){$(this).children().eq(options.position).before(editableOption);}else{$(this).append(editableOption);}}$(this).keyup(function(event){switch(event.keyCode){case 9:case 13:case 16:case 17:case 18:case 27:case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 45:case 46:break;case 8:var option=$(this).children('option.'+options.pluginClass);if(option.val().length>1){$(this).children(':selected').removeAttr('selected');var value=option.val().substring(0,option.val().length-1);option.val(value).text(value).attr('selected','selected').show();}else if(option.val().length==1){option.val('').text('').hide();}break;default:$(this).children(':selected').removeAttr('selected');var keyValue=String.fromCharCode(event.keyCode);if(event.shiftKey){keyValue=keyValue.toUpperCase();}else{keyValue=keyValue.toLowerCase();}var option=$(this).children('option.'+options.pluginClass);option.val(option.val()+keyValue).text(option.val()).attr('selected','selected').show();break;}});$(this).keydown(function(event){return(event.keyCode!=8);});});};})(jQuery);